package Color

import (
	"reflect"
	"strings"
)

var Transparent = RGBA{}

var X11 = struct {
	AliceBlue,
	AntiqueWhite,
	Aqua,
	AquaMarine,
	Azure,
	Beige,
	Bisque,
	Black,
	BlanchedAlmond,
	Blue,
	BlueViolet,
	Brown,
	BurlyWood,
	CadetBlue,
	Chartreuse,
	Chocolate,
	Coral,
	CornflowerBlue,
	Cornsilk,
	Crimson,
	Cyan,
	DarkBlue,
	DarkCyan,
	DarkGoldenrod,
	DarkGray,
	DarkGreen,
	DarkKhaki,
	DarkMagenta,
	DarkOliveGreen,
	DarkOrange,
	DarkOrchid,
	DarkRed,
	DarkSalmon,
	DarkSeaGreen,
	DarkSlateBlue,
	DarkSlateGray,
	DarkTurquoise,
	DarkViolet,
	DeepPink,
	DeepSkyBlue,
	DimGray,
	DodgerBlue,
	FireBrick,
	FloralWhite,
	ForestGreen,
	Fuchsia,
	Gainsboro,
	GhostWhite,
	Gold,
	Goldenrod,
	Gray,
	Green,
	GreenYellow,
	Honeydew,
	HotPink,
	IndianRed,
	Indigo,
	Ivory,
	Khaki,
	Lavender,
	LavenderBlush,
	LawnGreen,
	LemonChiffon,
	LightBlue,
	LightCoral,
	LightCyan,
	LightGoldenrod,
	LightGray,
	LightGreen,
	LightPink,
	LightSalmon,
	LightSeaGreen,
	LightSkyBlue,
	LightSlateGray,
	LightSteelBlue,
	LightYellow,
	Lime,
	LimeGreen,
	Linen,
	Magenta,
	Maroon,
	MediumAquamarine,
	MediumBlue,
	MediumOrchid,
	MediumPurple,
	MediumSeaGreen,
	MediumSlateBlue,
	MediumTurquoise,
	MediumVioletRed,
	MidnightBlue,
	MintCream,
	MistyRose,
	Moccasin,
	NavajoWhite,
	NavyBlue,
	OldLace,
	Olive,
	OliveDrab,
	Orange,
	OrangeRed,
	Orchid,
	PaleGoldenrod,
	PaleGreen,
	PaleTurquoise,
	PaleVioletRed,
	PapayaWhip,
	PeachPuff,
	Peru,
	Pink,
	Plum,
	PowderBlue,
	Purple,
	RebeccaPurple,
	Red,
	RosyBrown,
	RoyalBlue,
	SaddleBrown,
	Salmon,
	SandyBrown,
	SeaGreen,
	SeaShell,
	Sienna,
	Silver,
	SkyBlue,
	SlateBlue,
	SlateGray,
	Snow,
	SpringGreen,
	SteelBlue,
	Tan,
	Teal,
	Thistle,
	Tomato,
	Turquoise,
	Violet,
	Wheat,
	White,
	WhiteSmoke,
	Yellow,
	YellowGreen RGBA
}{
	AliceBlue:        RGBA{0.941176, 0.972549, 1, 1},
	AntiqueWhite:     RGBA{0.980392, 0.921569, 0.843137, 1},
	Aqua:             RGBA{0, 1, 1, 1},
	AquaMarine:       RGBA{0.498039, 1, 0.831373, 1},
	Azure:            RGBA{0.941176, 1, 1, 1},
	Beige:            RGBA{0.960784, 0.960784, 0.862745, 1},
	Bisque:           RGBA{1, 0.894118, 0.768627, 1},
	Black:            RGBA{0, 0, 0, 1},
	BlanchedAlmond:   RGBA{1, 0.921569, 0.803922, 1},
	Blue:             RGBA{0, 0, 1, 1},
	BlueViolet:       RGBA{0.541176, 0.168627, 0.886275, 1},
	Brown:            RGBA{0.647059, 0.164706, 0.164706, 1},
	BurlyWood:        RGBA{0.870588, 0.721569, 0.529412, 1},
	CadetBlue:        RGBA{0.372549, 0.619608, 0.627451, 1},
	Chartreuse:       RGBA{0.498039, 1, 0, 1},
	Chocolate:        RGBA{0.823529, 0.411765, 0.117647, 1},
	Coral:            RGBA{1, 0.498039, 0.313725, 1},
	CornflowerBlue:   RGBA{0.392157, 0.584314, 0.929412, 1},
	Cornsilk:         RGBA{1, 0.972549, 0.862745, 1},
	Crimson:          RGBA{0.862745, 0.0784314, 0.235294, 1},
	Cyan:             RGBA{0, 1, 1, 1},
	DarkBlue:         RGBA{0, 0, 0.545098, 1},
	DarkCyan:         RGBA{0, 0.545098, 0.545098, 1},
	DarkGoldenrod:    RGBA{0.721569, 0.52549, 0.0431373, 1},
	DarkGray:         RGBA{0.662745, 0.662745, 0.662745, 1},
	DarkGreen:        RGBA{0, 0.392157, 0, 1},
	DarkKhaki:        RGBA{0.741176, 0.717647, 0.419608, 1},
	DarkMagenta:      RGBA{0.545098, 0, 0.545098, 1},
	DarkOliveGreen:   RGBA{0.333333, 0.419608, 0.184314, 1},
	DarkOrange:       RGBA{1, 0.54902, 0, 1},
	DarkOrchid:       RGBA{0.6, 0.196078, 0.8, 1},
	DarkRed:          RGBA{0.545098, 0, 0, 1},
	DarkSalmon:       RGBA{0.913725, 0.588235, 0.478431, 1},
	DarkSeaGreen:     RGBA{0.560784, 0.737255, 0.560784, 1},
	DarkSlateBlue:    RGBA{0.282353, 0.239216, 0.545098, 1},
	DarkSlateGray:    RGBA{0.184314, 0.309804, 0.309804, 1},
	DarkTurquoise:    RGBA{0, 0.807843, 0.819608, 1},
	DarkViolet:       RGBA{0.580392, 0, 0.827451, 1},
	DeepPink:         RGBA{1, 0.0784314, 0.576471, 1},
	DeepSkyBlue:      RGBA{0, 0.74902, 1, 1},
	DimGray:          RGBA{0.411765, 0.411765, 0.411765, 1},
	DodgerBlue:       RGBA{0.117647, 0.564706, 1, 1},
	FireBrick:        RGBA{0.698039, 0.133333, 0.133333, 1},
	FloralWhite:      RGBA{1, 0.980392, 0.941176, 1},
	ForestGreen:      RGBA{0.133333, 0.545098, 0.133333, 1},
	Fuchsia:          RGBA{1, 0, 1, 1},
	Gainsboro:        RGBA{0.862745, 0.862745, 0.862745, 1},
	GhostWhite:       RGBA{0.972549, 0.972549, 1, 1},
	Gold:             RGBA{1, 0.843137, 0, 1},
	Goldenrod:        RGBA{0.854902, 0.647059, 0.12549, 1},
	Gray:             RGBA{0.745098, 0.745098, 0.745098, 1},
	Green:            RGBA{0, 1, 0, 1},
	GreenYellow:      RGBA{0.678431, 1, 0.184314, 1},
	Honeydew:         RGBA{0.941176, 1, 0.941176, 1},
	HotPink:          RGBA{1, 0.411765, 0.705882, 1},
	IndianRed:        RGBA{0.803922, 0.360784, 0.360784, 1},
	Indigo:           RGBA{0.294118, 0, 0.509804, 1},
	Ivory:            RGBA{1, 1, 0.941176, 1},
	Khaki:            RGBA{0.941176, 0.901961, 0.54902, 1},
	Lavender:         RGBA{0.901961, 0.901961, 0.980392, 1},
	LavenderBlush:    RGBA{1, 0.941176, 0.960784, 1},
	LawnGreen:        RGBA{0.486275, 0.988235, 0, 1},
	LemonChiffon:     RGBA{1, 0.980392, 0.803922, 1},
	LightBlue:        RGBA{0.678431, 0.847059, 0.901961, 1},
	LightCoral:       RGBA{0.941176, 0.501961, 0.501961, 1},
	LightCyan:        RGBA{0.878431, 1, 1, 1},
	LightGoldenrod:   RGBA{0.933333, 0.866667, 0.509804, 1},
	LightGray:        RGBA{0.827451, 0.827451, 0.827451, 1},
	LightGreen:       RGBA{0.564706, 0.933333, 0.564706, 1},
	LightPink:        RGBA{1, 0.713725, 0.756863, 1},
	LightSalmon:      RGBA{1, 0.627451, 0.478431, 1},
	LightSeaGreen:    RGBA{0.12549, 0.698039, 0.666667, 1},
	LightSkyBlue:     RGBA{0.529412, 0.807843, 0.980392, 1},
	LightSlateGray:   RGBA{0.466667, 0.533333, 0.6, 1},
	LightSteelBlue:   RGBA{0.690196, 0.768627, 0.870588, 1},
	LightYellow:      RGBA{1, 1, 0.878431, 1},
	Lime:             RGBA{0, 1, 0, 1},
	LimeGreen:        RGBA{0.196078, 0.803922, 0.196078, 1},
	Linen:            RGBA{0.980392, 0.941176, 0.901961, 1},
	Magenta:          RGBA{1, 0, 1, 1},
	Maroon:           RGBA{0.690196, 0.188235, 0.376471, 1},
	MediumAquamarine: RGBA{0.4, 0.803922, 0.666667, 1},
	MediumBlue:       RGBA{0, 0, 0.803922, 1},
	MediumOrchid:     RGBA{0.729412, 0.333333, 0.827451, 1},
	MediumPurple:     RGBA{0.576471, 0.439216, 0.858824, 1},
	MediumSeaGreen:   RGBA{0.235294, 0.701961, 0.443137, 1},
	MediumSlateBlue:  RGBA{0.482353, 0.407843, 0.933333, 1},
	MediumTurquoise:  RGBA{0.282353, 0.819608, 0.8, 1},
	MediumVioletRed:  RGBA{0.780392, 0.0823529, 0.521569, 1},
	MidnightBlue:     RGBA{0.0980392, 0.0980392, 0.439216, 1},
	MintCream:        RGBA{0.960784, 1, 0.980392, 1},
	MistyRose:        RGBA{1, 0.894118, 0.882353, 1},
	Moccasin:         RGBA{1, 0.894118, 0.709804, 1},
	NavajoWhite:      RGBA{1, 0.870588, 0.678431, 1},
	NavyBlue:         RGBA{0, 0, 0.501961, 1},
	OldLace:          RGBA{0.992157, 0.960784, 0.901961, 1},
	Olive:            RGBA{0.501961, 0.501961, 0, 1},
	OliveDrab:        RGBA{0.419608, 0.556863, 0.137255, 1},
	Orange:           RGBA{1, 0.647059, 0, 1},
	OrangeRed:        RGBA{1, 0.270588, 0, 1},
	Orchid:           RGBA{0.854902, 0.439216, 0.839216, 1},
	PaleGoldenrod:    RGBA{0.933333, 0.909804, 0.666667, 1},
	PaleGreen:        RGBA{0.596078, 0.984314, 0.596078, 1},
	PaleTurquoise:    RGBA{0.686275, 0.933333, 0.933333, 1},
	PaleVioletRed:    RGBA{0.858824, 0.439216, 0.576471, 1},
	PapayaWhip:       RGBA{1, 0.937255, 0.835294, 1},
	PeachPuff:        RGBA{1, 0.854902, 0.72549, 1},
	Peru:             RGBA{0.803922, 0.521569, 0.247059, 1},
	Pink:             RGBA{1, 0.752941, 0.796078, 1},
	Plum:             RGBA{0.866667, 0.627451, 0.866667, 1},
	PowderBlue:       RGBA{0.690196, 0.878431, 0.901961, 1},
	Purple:           RGBA{0.627451, 0.12549, 0.941176, 1},
	RebeccaPurple:    RGBA{0.4, 0.2, 0.6, 1},
	Red:              RGBA{1, 0, 0, 1},
	RosyBrown:        RGBA{0.737255, 0.560784, 0.560784, 1},
	RoyalBlue:        RGBA{0.254902, 0.411765, 0.882353, 1},
	SaddleBrown:      RGBA{0.545098, 0.270588, 0.0745098, 1},
	Salmon:           RGBA{0.980392, 0.501961, 0.447059, 1},
	SandyBrown:       RGBA{0.956863, 0.643137, 0.376471, 1},
	SeaGreen:         RGBA{0.180392, 0.545098, 0.341176, 1},
	SeaShell:         RGBA{1, 0.960784, 0.933333, 1},
	Sienna:           RGBA{0.627451, 0.321569, 0.176471, 1},
	Silver:           RGBA{0.752941, 0.752941, 0.752941, 1},
	SkyBlue:          RGBA{0.529412, 0.807843, 0.921569, 1},
	SlateBlue:        RGBA{0.415686, 0.352941, 0.803922, 1},
	SlateGray:        RGBA{0.439216, 0.501961, 0.564706, 1},
	Snow:             RGBA{1, 0.980392, 0.980392, 1},
	SpringGreen:      RGBA{0, 1, 0.498039, 1},
	SteelBlue:        RGBA{0.27451, 0.509804, 0.705882, 1},
	Tan:              RGBA{0.823529, 0.705882, 0.54902, 1},
	Teal:             RGBA{0, 0.501961, 0.501961, 1},
	Thistle:          RGBA{0.847059, 0.74902, 0.847059, 1},
	Tomato:           RGBA{1, 0.388235, 0.278431, 1},
	Turquoise:        RGBA{0.25098, 0.878431, 0.815686, 1},
	Violet:           RGBA{0.933333, 0.509804, 0.933333, 1},
	Wheat:            RGBA{0.960784, 0.870588, 0.701961, 1},
	White:            RGBA{1, 1, 1, 1},
	WhiteSmoke:       RGBA{0.960784, 0.960784, 0.960784, 1},
	Yellow:           RGBA{1, 1, 0, 1},
	YellowGreen:      RGBA{0.603922, 0.803922, 0.196078, 1},
}

var W3C = X11

func init() {
	W3C.Gray = RGBA{0.501961, 0.501961, 0.501961, 1}
	W3C.Green = RGBA{0, 0.501961, 0, 1}
	W3C.Maroon = RGBA{0.501961, 0, 0, 1}
	W3C.Purple = RGBA{0.501961, 0, 0.501961, 1}
}

// String creates a Color from the given string, which can be either an HTML color code or a named color
// (case-insensitive). Returns Transparent if the color cannot be inferred from the string.
func String(s string) RGBA { //gd:Color.from_string
	if ValidHex(s) {
		return Hex(s)
	}
	s = strings.Replace(s, " ", "", -1)
	s = strings.Replace(s, "-", "", -1)
	s = strings.Replace(s, "_", "", -1)
	s = strings.Replace(s, "'", "", -1)
	s = strings.Replace(s, ".", "", -1)
	s = strings.ToUpper(s)
	if s == "TRANSPARENT" {
		return Transparent
	}
	rvalue := reflect.ValueOf(X11)
	if strings.HasPrefix(s, "WEB") {
		rvalue = reflect.ValueOf(W3C)
		s = s[3:]
	}
	rtype := rvalue.Type()
	for i := 0; i < rtype.NumField(); i++ {
		if strings.ToUpper(rtype.Field(i).Name) == s {
			return rvalue.Field(i).Interface().(RGBA)
		}
	}
	return Transparent
}
